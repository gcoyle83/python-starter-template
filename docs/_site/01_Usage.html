<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Python Development Group – usage</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Python Development Group</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./tools.html" rel="" target="">
 <span class="menu-text">Tools</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#usage" id="toc-usage" class="nav-link active" data-scroll-target="#usage">Usage</a>
  <ul class="collapse">
  <li><a href="#create-a-new-repo-from-this-template" id="toc-create-a-new-repo-from-this-template" class="nav-link" data-scroll-target="#create-a-new-repo-from-this-template">Create a new repo from this template</a></li>
  <li><a href="#create-virtual-environment" id="toc-create-virtual-environment" class="nav-link" data-scroll-target="#create-virtual-environment">Create virtual environment</a></li>
  <li><a href="#automatic-linting-and-formatting-with-pylint-and-black" id="toc-automatic-linting-and-formatting-with-pylint-and-black" class="nav-link" data-scroll-target="#automatic-linting-and-formatting-with-pylint-and-black">Automatic linting and formatting with <code>Pylint</code> and <code>black</code></a></li>
  <li><a href="#remote-testing" id="toc-remote-testing" class="nav-link" data-scroll-target="#remote-testing">Remote testing</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<p><a href="https://github.com/gcoyle83/python-starter-template/actions/workflows/checks.yml"><img src="https://github.com/gcoyle83/python-starter-template/actions/workflows/checks.yml/badge.svg?branch=main" class="img-fluid" alt="Remote tests"></a> # Python Starter Template This repo provides a basic starter template for best practices developing and testing <em>unpackaged</em> Python code. Emphasis on that last point - this is <strong>not</strong> a Python packaging template. This template is for use with generic Python projects that want to take advantage of automated tools to improve the development process, including:</p>
<ul>
<li>Virtual environment management with <code>venv</code></li>
<li>Code formatting and linting with <code>Pylint</code> and <code>Black</code></li>
<li>Functional tests with <code>Pytest</code></li>
<li>Remote tests to support reproducibility (via GitHub Actions)</li>
</ul>
<p>If you are looking for a template repo for Python projects that will be distributed as packaged libraries, <a href="https://packaging.python.org/en/latest/overview/">maybe we should create one</a>…</p>
<blockquote class="blockquote">
<p>[!NOTE]<br>
Many of the concepts implemented here are directly from the excellent Duke University Coursera Course by Noah Gift: <a href="https://coursera.org/share/0e44a583040b010e6aeb674febbac00e"><em>Cloud Computing Foundations</em></a></p>
</blockquote>
<section id="usage" class="level1">
<h1>Usage</h1>
<blockquote class="blockquote">
<p>[!WARNING]<br>
This repo is a <em>template</em>. DO NOT clone it and then attempt to modify it (this will fail by design).</p>
</blockquote>
<section id="create-a-new-repo-from-this-template" class="level2">
<h2 class="anchored" data-anchor-id="create-a-new-repo-from-this-template">Create a new repo from this template</h2>
<p>Start a new GitHub repo, and select this repo from the “Repository Template” option. Be sure to select the subsequent “Include all branches” option to benefit from the project documentation, website and GitHub Pages branches. The remainder of the usage instructions assume that actions are taken from this new repository.</p>
</section>
<section id="create-virtual-environment" class="level2">
<h2 class="anchored" data-anchor-id="create-virtual-environment">Create virtual environment</h2>
<p>The next step is to build the virtual environment for this project locally, as follows:</p>
<ol type="1">
<li><p>First, note that the project “requires” (by way of declaration right here), use of Python 3.12; since <code>venv</code> uses whatever Python interpreter calls it as the base, each user needs to be sure to call <code>venv</code> with Python 3.12 as the active interpreter. To do so:</p>
<ul>
<li>Install Python 3.12 from <a href="https://www.python.org/downloads/">python.org</a></li>
<li>Keep all defaults when running the installer, noting the installation location should be at <code>C:\Users\&lt;user&gt;\AppData\Local\Programs\Python\Python312</code></li>
<li>Close the installer app when it is finished</li>
<li>Open a Bash (or Powershell) terminal</li>
<li>Enter command <code>C:\Users\&lt;user&gt;\AppData\Local\Programs\Python\Python312\python -m venv .venv</code> to create a virtual environment in a subdirectory named <code>.venv</code>
<ul>
<li>Running the <code>python -m venv</code> command from the directory where Python 3.12 is stored forces use of the 3.12 interpreter as base</li>
<li>Creating the virtual environment in the <code>.venv</code> directory follows standard practice and ensures that these files are ignored by git (as indicated in the <code>.gitignore</code> file in the “Environments” section)</li>
</ul></li>
<li>Open the <code>.venv</code> folder and then the <code>pyvenv.cfg</code> file; note that the Python <code>version</code> is 3.12.x</li>
</ul></li>
<li><p>Next, add the required packages to this virtual environment:</p>
<ul>
<li>First, activate the environment by running
<ul>
<li>(PowerShell) <code>.venv/Scripts/Activate.ps1</code></li>
<li>(Bash) <code>.venv/Scripts/activate</code></li>
</ul></li>
<li>Install requirements with <code>pip install -r requirements.txt</code></li>
</ul></li>
</ol>
</section>
<section id="automatic-linting-and-formatting-with-pylint-and-black" class="level2">
<h2 class="anchored" data-anchor-id="automatic-linting-and-formatting-with-pylint-and-black">Automatic linting and formatting with <code>Pylint</code> and <code>black</code></h2>
<p>It is important but tedious to follow formatting standards. Automated tools have been developed by those who agree with this statement (starting at Bell Labs almost 50 years ago). A <a href="https://en.wikipedia.org/wiki/Lint_(software)">linter</a> is a tool for static code analysis used to flag programming errors, bugs, stylistic errors and suspicious constructs. <a href="https://pylint.readthedocs.io/en/stable/">Pylint</a> is one such tool that is widely used for Python to enforce the <a href="https://peps.python.org/pep-0008/">PEP8 Style Guide</a>. <a href="https://black.readthedocs.io/en/stable/the_black_code_style/index.html">Black</a> is another, and these two tools are <a href="https://pylint.readthedocs.io/en/latest/?badge=latest#advised-linters-alongside-pylint">often used in parallel</a> to get the most benefit. The following steps will help you understand how to use these tools to improve your Python projects:</p>
<ol type="1">
<li><p>Use <code>Pylint</code> to analyze the code in the <code>src</code> folder: <code>pylint src</code> This command will analyze all <code>*.py</code> files in the <code>src</code> folder. Note that the output to the terminal includes recommendations to include docstrings for modules and functions, and another recommendation to improve efficiency of the <code>python_version</code> function in <code>version.py</code>.</p>
<p>None of these recommendations are compliance issues, and they can be suppressed. Note the overall score is 4.62/10. Suppressing these recommendations with the <code>--disable</code> flag: <code>pylint --disable=R,C src</code> &gt; Note, <code>--disable=R,C</code> indicates that ‘refactor’ and ‘convention’ messages should be disabled The resulting output should now have no suggestions, and the overall rating is 10/10</p>
<p>Finally, only errors can be reported by passing the <code>--errors-only</code> flag <code>pylint --errors-only src</code> Note that know rating is returned. Try introducing an error into a module and run again to see what happens.</p></li>
<li><p>Now use <code>black</code> to autoformat your Python code to PEP8 compliance. Black is “an opinionated strict subset of PEP8”. While <code>Pylint</code> can be used to generate a set of recommendations or flag errors, <code>Black</code> can be used to automatically enforce formatting conventions:</p>
<ul>
<li>First, open <code>hello.py</code> and paste the following function into the end of the module: <code>def my_func(x):          """          This is my function it returns the product of `x` and `a`          """          a = [              1,2,3          ]          return a*x</code></li>
<li>Now run the command <code>black src</code>, and open <code>hello.py</code> again. Note the input has been reformatted to: <code>def my_func(x):          """          This is my function it returns the product of `x` and `a`          """          a = [1, 2, 3]          return a * x</code> By using first <code>Black</code> and then <code>Pylint</code> in succession, much of the tedium of code review can be avoided and errors can be caught and corrected <strong>before committing</strong>. ## Unit tests with <code>Pytest</code> After static review, the code can be dynamically tested. The <a href="https://docs.pytest.org/en/7.4.x/index.html"><code>Pytest</code></a> package is designed to facilitate testing of Python projects from basic unit tests to full evaluation of functional requirements for complex projects. Here it is used to enable and demonstrate basic unit testing.</li>
</ul></li>
<li><p>Run the test suite in the <code>tests</code> directory with the command <code>python -m pytest -vv tests</code>.</p></li>
<li><p>Note the results (percent complete and pass/fail status) printed to the terminal after each functional unit test.</p></li>
</ol>
</section>
<section id="remote-testing" class="level2">
<h2 class="anchored" data-anchor-id="remote-testing">Remote testing</h2>
<p>Testing on the development system is a fundamental first step, but Python projects should also be regularly tested on remote systems to ensure that they can be reproduced “from scratch” without issue. The GitHub Workflow file <code>checks.yml</code> enables an automated workflow to run the above steps (build Python environment, format and lint code, run tests) on a remote GitHub “runner”.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>